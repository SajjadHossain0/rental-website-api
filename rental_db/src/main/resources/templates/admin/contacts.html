<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{admin/layout}">

<head>
    <title>Contact Submissions</title>
</head>

<body>

    <div layout:fragment="content">

        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="font-size: 1.25rem;">Contact Submissions</h2>
            </div>

            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="text-align: left; border-bottom: 1px solid #e5e7eb;">
                        <th style="padding: 12px;">ID</th>
                        <th style="padding: 12px;">Name</th>
                        <th style="padding: 12px;">Email</th>
                        <th style="padding: 12px;">Type</th>
                        <th style="padding: 12px;">Status</th>
                        <th style="padding: 12px;">Date</th>
                        <th style="padding: 12px; text-align: right;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="contact : ${contacts}" style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 12px;" th:text="${contact.uniqueId}">CNT-123</td>
                        <td style="padding: 12px;" th:text="${contact.fullName}">John Doe</td>
                        <td style="padding: 12px;" th:text="${contact.email}">john@example.com</td>
                        <td style="padding: 12px;"
                            th:text="${contact.propertyType != null ? contact.propertyType.name : 'N/A'}">Apartment</td>
                        <td style="padding: 12px;">
                            <span th:if="${contact.status == 'pending'}"
                                class="status-badge status-pending">Pending</span>
                            <span th:if="${contact.status == 'approved'}"
                                class="status-badge status-approved">Approved</span>
                            <span th:if="${contact.status == 'rejected'}"
                                class="status-badge status-rejected">Rejected</span>
                        </td>
                        <td style="padding: 12px;" th:text="${#temporals.format(contact.createdAt, 'yyyy-MM-dd')}">
                            2024-01-01</td>
                        <td style="padding: 12px; text-align: right;">
                            <a th:href="@{/admin/contacts/view/{id}(id=${contact.id})}"
                                style="color: #4f46e5; margin-right: 10px;">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a th:href="@{/admin/contacts/delete/{id}(id=${contact.id})}" style="color: #ef4444;"
                                onclick="return confirm('Are you sure?')">
                                <i class="fas fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(contacts)}">
                        <td colspan="7" style="padding: 20px; text-align: center; color: #6b7280;">No contact
                            submissions found.</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

</body>

</html>